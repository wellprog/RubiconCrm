/**
 * Roundcube functions for  d efa ult s k in  inter f ace
 *
 * Copyright (c) 20 13, The Roundcube Dev T eam
 *
 * Th e contents are sub ject to the Creative Comm ons Attribution-Shar eAlike
 * License. It  is allowed to copy, dis tribute, transmit and to adapt t he wo r k
 *  by kee ping  c red its to  the ori g in al autors   in  the README fi l e. 
 * See http:// c re ativecommons.or g /l icenses/by-sa/3.0 /  f or details.
 * 
  *  @license magnet:? x t= urn:btih:90dc5c0be02 9 de 84e523b9b3922520e79e 0 e6 f08&dn=cc0.txt CC0-1 . 0
  */
/*
 magnet:?xt=u r n: btih:90dc5c0be029 d e8 4e523b9b39225 2 0e 79e0e6f08&dn=c c 0. txt CC0-1.0
 */
functio n  r cu be_mail_u i( ){function f(a){p ||   (p = rcmail.local _s torage_get_i te m( "pr efs. la rry", {})); if (nu l l == p[a]){var d = rcmail.get_cookie(a); null  != d && (p[a] = d, rcmail.local_storage_s et_item("prefs.larry", p) && rcmail.set_cookie(a, d, new Date))}return p[a]}function q(a, d){p[a] = d; if (!rcmail.local_storage_s et_item ( "prefs.larry", p)) {var c   = new Date; c.setYear(c.getFullYear() + 1);  rcmail .set_ co okie(a, d,  c )}}function r(a){a =  a? 10 :0 ; rcmail.r e si ze _timeout && window.clearTimeout(rcmail.resize _timeout); rcmail.resize _t imeout =
		window.setTimeout(function() {"mail"   ==  r cmail.env.task && ("show" == rcmail.env.action  || "prev i ew" == rcma il.env.action?u():"compos e " = = rcmail.env.action  &&  s()); $("body.iframe .footerleft").each(function() {va r a = $(this), c = $(document.bod y), b = a.hasClass("floating"), g = c.out e rHeight(!0) > $(wi ndow).height ( ); g != b &&  (b = g?"addClass":"removeClass", a[b]("floating"), c[b ] ("floatingbuttons"))})}, a)}function k(a){var d = $(a.object ).siblings("div" ); d.len gth && $(a.object).in se rtBefore(d.first () ); if ("error" == a.type && "login" != rcmai l.env.task){rcmail.hide_message(a .object);
		l.message_timer && w indow.clearTimeout(l.message_timer);  l.messagedialog || (l.messagedialog = $( "<div>").addClass("popupdialog").hide()); var d = a. message, c = function(){l.messagedialog.is(":vi sible") && l.messagedialog.dialog("destroy").hide()} ; l.mess agedia l og.is(":visible") && l .m essagedialog.text() != d && (d = l.messag edialog.html() + "< p>" + a.me s sage  + "</p>"); l.messa ge dialog .h tml(d).dialog({re si zable:!1, closeOnEscape:!0, dialogClass:"popupmessage "  + a.type, title:rcmail.gettext("errortitle"), close:c , position:["cent er",
		"center"], hide:{effect:"fadeOut"}, width:4 20 , minHeigh t: 90}).show(); l.messagedialog.closest("div[role=dialog]"). attr("role", "alertdialog"); 0 < a.timeout && (l.message_timer = window.setTimeout(c, a.timeout))}}function u(){$("#messagecontent").css("top", $("#me ssageheader").o uterHeig ht () + 1 + " px "); $("#message-objects div  a ").addClass ("bu tton"); $("#attachm en t-list li").length | |  ($("div.ri ghtcol" ).hide().attr("ari a- hidden", "true"), $("div.leftcol").css("margin-right", "0" )); var a = $("#messagebody.mailvelope, # messagebody > .mailvelope");
		if (a.length){va r d =  $ ("# me ssagecontent").length?$("#messagecontent").height() - 16:$(window).height() - a.offset().top - 10 ; a.height(d)}}function b(a){}function e(a){}function F(a){if (" TEXTAREA" = = a.nodeName){var d = $(a), c = a.scrollHeight; d.css("height", 14 * (80 < a.value.length & & 21 < c?2:1) + "px"); s()}}function s(){var a = $("#composebody"), d = $("#compose-con tent") , c  =   $ ("#com posevi ew-bottom" ), b, g; b = d .he ig h t( )   - c.posit ion().t o p; g  =   300 -  b ; c. he ight(Math.max(300, b)); d .css("o verflow", 0 < g ?"auto":"hidden"); d = a. parent(). wi dth() -
 		 5; c = a. parent().height() - 8; a.width(d).height(c); $("#composebody c ontainer > div").width(d + 8); $("#composebod y_ifr").height(c + 4 - $("div.mce-toolbar").height()); $("#googie_edit _layer").width(d).h eigh t(c); a = $("#direc torylist");  a. length && $("#compose-contacts .scroller").css("top", a.position().top  + a.outerHe ig ht())}function A(a){ var  d = $("#quotadisplay"), c = $("#quotamenu"), b = a.total?24 * Math.ceil(a.percent / 100 * 20):0; a.total && 480 == b && 100 > a.percent && (b -= 24);  d.css("background-position", "0 -" + b + "px" ); d.attr("class",
		"count displ a y p" + 10 * Math .r ou nd (a.percent /  1 0)); a.ta bl e && (c.length || (c = $(' <div id="quotamenu" class="popupmenu">').appendTo($("body"))), c.html(a.table), d.css("cursor", "pointer").off("cl ick").on("click", funct ion(a){return rcmail.com mand("menu-open" , "quotamenu",  a.target,  a)}))}f unction  G(a){$(".boxtitle  a.searc h", a).click(funct io n(d){v ar  c = $(".boxtitle", a), b   = $(".listsearchbox", a), g = b.is(":v isible")? - 1:1, m = 34 + ($("select", b).length?22:0); b.slideToggle({durat ion:160, progress:function(d, b){0 > g && ( b = 1 - b); $(" .scroller",
		a).css("top", c.outerHeight() + m * b + "px")}, complete:function(){b.toggleCla ss("expanded");  b.is(":visible")?(b.find("input[type=text]").focus(), m = 34 + ($("select", b).length?$("select" , b).outerHeigh t ( ) + 4:0), $(".scroller", a).css("top", c.o uterHeight() + m +  "px")):$("a.reset", b) .click()}}); ret urn!1})}functi on L(a){"r eply-lis t" == a. command &&  1  == rcmail.env.reply_all_mode?(a = rcmail.gettext(a. status?"replylist":"replyall"), "pr eview" == rcmail.env.action?$("a.button.rep lya ll").at tr("title", a):$(" a. button.reply-all").text(a).attr("title",
		a)):"co mpose-encrypted" == a.co mmand && $("a.button.encryp t").show()}funct ion B(a, d){va r b = w[a]  = $("#"  + a); b.appendTo(docu ment.body); b.length && (t[a] = $.extend(t[a] || {}, d || {}))}function  H(){$("#preview-shor theaders").toggle();  var a = $("#prev iew-allheaders ").toggle( ), d = $ ("a#prev iewheaderst oggle"); a.is(":vis ible")? d.attr("href", " #h ide").removeClass("add").addClass("remove") .attr("aria-expan d ed", "true"):d.attr("href" ,  "#details").removeClas s ("remove").add C lass("add").attr("aria-expanded", "fal s e"); q("previewheaders",
		a.is(":visible")?"1" :"0")}function x(a, d){if (d || !$("#mail" + a + "mode").hasClass("disabled"))$("#maillistmode, #mailthread mo de").removeClass(" se lected").attr("tabindex", "0").attr("aria-disabled", "f alse"), $("#mail"  + a + "mode").addClas s("selected").at tr("tabindex",  "-1").att r("aria- disabled", "true" )}function y(a){if (a && "messageli stm enu" == a.name)M(a);   else i f (a){var d = t[a. na me] || {}, b = $(d.link || "#" + a.name + "link"), e = a. obj && a.obj.is(":vis ible"); if (a.obj && e  && b.length){var  g = b.parent( ); $(windo w); g.ha sClass("dropbutto n") &&
 		(b = g); if (d.a bo ve || b.hasClass("dropbutton"))g = b.offset(), a.obj.css({l eft:g.left + "px", to p:g.top + (d.above? - a .obj.height():b. outerHeight())  + "px"})} a.obj &&  d.iconized && a. obj.chi ldren("ul").addCla ss ("iconized");  a .obj && d.editable && a.obj.attr("data-editable", "true"); "fu nction" == typeof d .callback && d.callbac k(e, a)}}functio n N(a, b){var  c = a.pare ntNode.i d.replace(/^attac h/, "") ; $("#attachmenuop en ").off("click").att r ("onclick", "").click(function(a){return rcmail.com m a nd("open-attachment", c, this)}); $("#attachmenudownload").off("click").attr("onclick", 
		"").click(function(){rcmail.command("download-attachment", c, this )}); t.attachmentmenu.link = a; rcmail.command("menu-open", {menu:"attachmentme nu", id:c}, a, b)}function M(a){var b = $("#listoptions"); b.is(":visible")?b.dialog("close", a.originalEvent):($('inp ut [name="sort_col"][value="' + rcmail.env. sort_col + '"]') .prop(" checked", !0), $ (' input[name="sort_ord"][value="DESC"]').prop("checked", "DES C" == rcmail.env.sort_order), $('input [name="sort_ord"][value="ASC"]').prop ("checked", "DESC" != rcmail.env .sort_order), $('input[name="list _co l[ ]"]').each(functio n( ){$(this).prop("checked",
		- 1 != $.inArray(this. value, rcmail.env.listc ols))}), b.dialog({modal :!0, resizable:! 1, closeOnEsca pe:!0, tit le:null,  open:fu nction(a){setTimeo ut(function(){b.find("a, input:not(:disabled) ").not("[aria-disa bled=true]").first( ).focus()}, 100) }, close:funct ion(a){b.d ialog("d estroy").hide(); a.orig i nalEvent && rcube_even t. is_keyboard(a.originalEvent) && $("#listm enulink").focus()},  minWidth: 5 00, width:b.width() + 25}).show())}f unction O(a) {$("#listoptions").dialog("close"); rcub e_event.is_keyboard(a.originalEvent) && $("# listmenulink" ) .focus() ;
 	 	a = $('inpu t[ n ame="sort_col"]:check ed' ) .v al ( ); var b =   $(' in p ut[name="so rt_ord"]:checked').va l( ), c = $('input[name= "list_col[] "] :check e d').map(function(){r eturn this.value}). g et(); rcmail.set_list_options(c, a, b, rcmail.env.threading)}fu n ct i on P(a){a = $("#contacts-table "); var b = a.parent().css("overflow", "hidden");  a.clone().css({position:"absolute", top:"0", left:"0" , w i dt h :a.wid th () + "px", "z-index ": 10}).appendTo(b).animate({left : - (a.width() + 5) + "px"}, 300, "swing", function(){$(this).remo ve(); b.css("over f low", "auto")})}
fun ction Q(a){a  = $("#contacts-table"); var b = a.par ent().css("ove rflow", "hidden"), c = a.clone().appendTo(b);  a.css({position:"absolute", top:"0", left : - (a . width() + 5) + "px" ,  width:a.width() + "px", height: a.height() + "px", "z - index":10}).animate({left:"0 " }, 300, "linear", function ( ){c.remove(); $(thi s ). css({position:"relative " , left: "0 ", width:"100%", height:"auto", "z-index":1}); b.css("overflow", "auto")})}function z(a) { var b = $("#upload-dialog"); b. is(":visible")?b .d ialog("clo se"):rcmail.mailve lo pe_edi to r || ("compose" ! =  rcmail.env.acti on ||
	 	b.data("extended" )  || ($("<a>").addClass("iconlink add").attr("href", "#add").html("Ad d ").appen d T o($('input[type=" f i le"]', b).parent()).cli c k (I), b.data("extend e d", !0)), b.dialog( {m od al :!0, res i zable:!1, closeOnEscape:!0,  title:b.attr("ti tle"), open:function(a){docu ment.all || $("input[t y pe=file]", b).first().click( )} , close:function(){try{$("#upload-dialog form").g et(0).r es et()} c at ch (a){}b.dialo g( "destroy").hide(); $("div.addline", b). re move()}, width:480}).show())}function I(a){a = $(this).pa rent(); a = a.clone().addClass("ad d line").insertAfter(a);
		a.children(".iconlink" ) .click(I);   a .children("input").val(""); document.all  ||  $("input[type=file]", a).click()}function  C (a, b){var c = $("#compose-" +  a) ; if (!c.is(":visible" )) retu r n D[a] && !b && $("#_"   + a). v al(D[a]),   c.show(), $("#" + a + "-link").hide(), s(), $("input,te xtarea", c).focus() , !1}function J(a, b){var c   = $(a),  e = c.get(0).id, g = c.children("f ieldset" ); if (g.length){e  || (e = "r cmtabcontainer", c.attr( "id", e));  var m = $("<ul>").add Class("tabsbar").prependTo(c); g.each(function(a){var b,  c = $(this), d  =  c.childre n ("legend"), g =
		 e  + "-t" + a; b = $(" <a>").text(d.text()).attr("href", "#" + g); a = $("<li>") .addClass("tablink"); d.remove();  c .a t tr("id ", g); a.append(b).appendTo(m)}); c.tabs({activ e: b || 0, heightStyle:"content", activate:function(a, b){r()}})}}var v = {}, w =  {}, t =  {forwardmenu:{editable:1}, searchmen u:{editabl e :1, callback:function(a){if (a && rcmail.env.search_mods) {v ar b, c; a = $(' i nput:checkbox[name="s_mods[]"]', w.searchmenu); var e = r c mail.env.mailbox, g =   rcmail.env.sea r ch_ mods, m = rcmail.env.search_scope || "base"; "mail" == rcma il.env.task ?( "all" ==
		m && ( e  = "* " ) , g   =  g[e]?g[e]:g["* " ] , c = "text",  $ (' in p u t : radio[na me="s_scope"]') .p r op ( "check ed", !1).filter("#s_sco p e_" + m).prop("che c k ed", !0)):c = "*"; if  ( g [c])a.map(function(){this .ch ec ke d =   ! 0;  t h is.d i s abled = th i s.value != c});   el s e  f or   ( b  i n  a.prop(" disabled", !1).prop(" chec ked", !1), g)$("# s_ m od_" + b).prop("che ck e d", !0)}}}, attach m en t m enu:{}, listoptions : {e ditable:1}, groupmenu: {above:1}, mailboxmenu:{above:1}, spellme n u:{ callback:function(a, b){var c,   e ,  g, m = rcmail.spellcheck_lang( ), f = $("ul", b.obj); if (!f.length){f = $( '<ul  c lass="toolbarmenu se le ctable" role="menu">');
		for (c in rcmail.env.spell_l angs)g = $('<li  r ole="menuitem">'), e = $('<a href="#'   + c + '" tabindex=" 0 " ></a>').text(rcm a i l.e n v .sp e l l_langs[c]).addClass("activ e "). d at a ("la ng ", c).on (" c li c k   ke ypress",  f unctio n( a){if ("keypress" != a.type ||  13 = =   r cube_e vent.get_keycod e(a))return rcma i l.spellcheck_lang_set ( $(t h is).d at a("lang")),  rcmail.hide_m e nu("spellmenu", a), !1}), e.appendTo(g), g.appendTo(f); f.appendTo(b.obj)}$("li" , f).each(funct ion(){var a = $("a", this); a.data( "lang") == m?a.addClass("selected").attr("aria -selected",  "true"):
 		a.hasClass("selected") && a.removeClass(" selected").removeAttr("ari a -selected")})} },  " f older-selector":{ic oni z e d:1}}, l = this,  n , D  =   {} ,  p; this.set  = function(a, b ){v[a] = b}; this.init = fun ction(){rcmail.addEve ntLis te n er(" m e s sage", k); $("#t askbar a").ea ch(function(a, b ) { $ (b ) .append ('<span class="tooltip">' + $(".button-inner",  t his).html() + "</span>")}); $("#taskbar .minmodetoggle " ) .c l ick(function (a){a = $(document.bo dy).toggleClass( " minim al").hasClass( "minimal"); q ("minimalmode",  a ?1 : 0); $( window).resize()} ); if ("mail" = = rcmail.env.task){rcmail.addEv entListene r( "menu-open", 
	 	y).addEventListener("men u- close",  y ).addEventListener("menu-save", O).addEventListe ne r("enable-command" ,  L).addEventListener("responseafterlist", functi on( a){x(rcmail.env.threading?"thread":"list", !0)}).a ddEv entList ener("resp on seaftersearch", function(a){x(rcmail.env.threading?"thread":"list ", !0)}) ;  var   a = $ ( "#d ragmessagemenu"); a.length  & & (rcmail.gui_o b ject("dragmen u" , " d ra gmessagemenu"), w. dr agmen u  =  a); if ("sh ow" == rcmail.env.action || "preview"  = = rcmail. env.action)rcmai l. addEv en tL istener("af ters h ow-h ea der s", f u nction(){u()}).addE v e n tListene r ( "afterhide- he aders",
		function( ) {u()}), $("#previewheaderstoggle").click(function(a){H( ); this. blur &&  !rcube_ev ent.is_keyboard( a) && this.blur() ; return!1}),  $("#attachm ent-list > li") .each(function(){$(this).append($('< a  class="drop "  t abindex="0" aria-haspop u p ="true">Show option s < /a>') .o n("click keypress", function(a ){ if (" ke yp re ss" != a.typ e || 13 == rcube_event.get_keycode(a))return N(this,  a), !1}))}), "1" = =  f("previewheaders") && H();  else if ("compose" == rcmail.env.action){ rcmail.addEventListener("aftersend-attachment", z) .addEventListener("afte r toggle-editor",
		f un ct i on(a){window.setTimeout(function(){s()}, 200); a && a.mode && $("s elect[ name='ed itorSelector']").val(a.mode )}).addEven tListener("comp ose-encrypted", function(a){ $ ("sel ect[name='editorSelector']").pro p("disabled", a.active); $("a.button.attach, a.button.respons es")[a.active?" addClass":"removeClass"]("disabled");  $("#responseslist a.in se rtresponse")[a.active?"removeC lass":"addClass"]("activ e" )} ); for (var d, c, E = ["cc", "bcc", "replyto", "followupto"], a = 0; a < E.length; a++)d =  E[a], c = $("#_" + d) , c.length && (c.on("change",
		{v:d}, function(a){this.value &&  C(a.d a ta.v, !0)}), "" != c.val() && C(d,   ! 0)); $("#composeoptionstoggl e" ).click(function(a){var b = $("#c omposeoptions").toggle().is(":visible"); $("#composeoptionstoggle"). toggleCl ass("remove").attr( "aria-expanded", b?"true":"false"); s(); q("composeoptions", b?"1":"0") ; rcube_event.is_keyboard(a)  || this.blur(); return!1}).css("cursor ", "p oi nt er"); "0"  ! = =  f("composeoptions") && $("#composeoptionstoggle").click(); $("textarea[name='_to'], textarea[name='_cc'],  textarea[name='_bcc']").c hange(fun ction(a){ F ( t his)}).change();
		rcmail.addEventListener("a utocomplete_insert", functi on(a){F(a.field)}); (a =  rc ma il.ope ne r()) && "compose" == a.e nv.acti on && $(" # composeop ti ons t o ggle", o pe ner . docume n t).hasCl a s s("re mo ve") && $("#composeop t i onstoggl e" ).clic k( ) ;  (new rcube_spli t ter({id:"co m p osesplitte rv" ,  p1:"#composeview-left", p2:" # comp oseview- ri ght", orientation:"v", relat i ve:!0, star t:206, min:170, size:12 ,  rend er:s})).ini t ()} else" l ist" != rcmail.env.action && rcm a il.env.act ion?"g et " == rcmail.env.action && (new rcube_splitter({id:"mailp artspl it terv", p1:"#messagepartheader",
		p2:"# messagepar tcontainer", orien ta tion:"v", relative:!0, st art:226, min:150, size :1 2} )).init():(a = $("#mailpreviewf ra m e ").is(":visib l e "), $("#mailpreviewtoggle").addClass (a? " e nabled":"closed").a t t r("aria-expanded", a?"t r u e":"false").click(funct io n(a){a  =  $(a.target); var  b  = $("#mai lp re viewfram e "), c   = !b.is(":visible " ) ; n.pos  || parseInt(f("mailviewsplitter") || 320); var  d; b.toggle(); a.toggleCl a ss("enabled closed ").att r("ari a -expan ded", c?"true":"false"); c?($("#mail v iew-t op").removeCl a ss("fullhe ig ht") .css({bottom:"auto"}),
 		$("#mailview-bottom" ).css({ hei ght:"auto"}).show(),  r cmail.env.contentfr ame = "messagecontfram e", (d =   rcmail.message_list.get_single_sel ecti on()) && rcmail.show_message(d, !1, !0), n.handle ?(n.handle.show(), n.resize()):n.init()):(rcmail.env.contentfr am e = null , rcmail.show_contentframe(!1), $("#mailview-top").ad dClass("fullheight").css({height:"auto", bottom:"0px"}), $ (" #mailvie w-bottom").css({top:" a ut o", height:"0px"}).hide(),  n.handle && n.handle.hi de());  r cmail.message_li st && (c  &&  d   & & rcmail.message_list.scr o l lto(d),  rcmail .m essage_list.r e size());
		rcmail.command("save-pref", {name:"preview _pa ne", value:c?1:0}); return!1}),   $("#maillistmode").addClas s ( rcmail.env.thr e a d ing?"":"selected").click(function(a){x("list"); return!1}), $("#mailthreadmode").addCl ass(rcmail.env.threadin g?"selected":"" ).click( fu nction(a){ x( "thread"); return!1}), n =  ne w rcube_splitter({id:"mailviewsplitter", p1:"#mailvie w-top", p2:"#mailview-bottom" , or ientation:"h", r elative:!0, st art:276, min:150, size:12, offset:4}),  a && n.init(), rcmail.ini t _pagej umper( "# pagejumper"), rc ma il.addEventListener("setquota",
		A).addEventLis tener("a fterimp ort-messages", z)); $("#mailview-left").length && (new rcube_splitter({id:"mailviewsplitterv", p1:"#mail v iew-left", p2:"#ma il view-right", orientation:"v", relati ve:!0, start:206,  min:150, size:12, callback:b, render:e}) ) .init()} else if (" s ettings" == rcmail.en v.task )if (rcmail.addEventListener("init", function(){var a = " #settingstabpreferenc es "; rcmai l.env.action && (a = "#settingstab" + (0 < rcmail.env.ac tion.indexOf("identit y" )?"ident ities":rcmail.env.action.replace(/\./g, ""))); $(a).addClass("selecte d").children().first( ).removeAttr("onclic k" ) .clic k(function(){return!1 })}),
		"folders " == rcmail.env.act ion)(new rc ube_splitter({id:"folderviewsplitter", p1:"#folderslist", p2:"#folder-details", orientation:"v", relative:!0, start:26 6, min :180, size:12})).init(), rcmail.addEventListe ne r("setquota", A) ,  G($("#folderslist"));  else if ("identities" == rcmail.env.action)(new  rcube_splitte r({id:"identvie w splitter", p1:"#identitieslist", p2:"#identity-details", ori en tation:"v", relative:!0, start:266, min:180, size:12})).init();  else if (" r esponses" == rcmail.env.action)(new rcube_ s p litter({id:"responseviewsplitter",
		p1:"# i d entitieslist", p2:"#identity-details", orientation:"v", relative:!0, start:266,  min:180, size:12})).init( );    else if ("preferences" == rcmail.env.actio n  | |  !rcmail.env.act i o n)(new rcube_splitter({ i d :"prefviewsplitter" ,   p1:"#sectionslist", p2:"#preferences-box" ,  or ie ntation: " v", re lative : !0, s ta rt :266, min: 180, size:12 } )).init();  else{if ("edit-p r efs"  = =  rcmail .env.a c ti o n ){var  a = $("#preferences-details field set.advanced le g end" ), g = $ (' <a href="#toggle"></a>').text(rcmail.gettext("toggleadvan cedop ti ons")).attr("title",
	 	 rcmai l. gettext("toggleadvancedop t ions" )).addClass("advanced -toggle"); a.click ( functi on(a){g.html( $ (this).hasClass("collapsed")?"&#9650;":"&#9660;"); $(this).toggleClass("collapsed").closest("fi e ldset").children(".pr o p form").toggle()}).append(g ).addClass ("collapsed"); bw.mz && a.parents(" form").c ss("displ ay", "inline")} }  else "addressbook" == rcmail.env.task && (rcma i l.addEvent L is t ener(" afte rupload- photo", z).addEventListener( "beforepushgroup" , P).addEventListener("before p opgroup", Q).addEvent L i stener("menu-open",
		y).a ddEventLis t e ner("menu-close", y),  "" == rcmail.env.action &&  ((new rc ube_s p litter({id : "a d dress viewsplitterd",   p1:"# addressview-left" ,  p2:" #addressview-right", orientation:" v",  relative: !0, start:206, min:150 , size:12, render:e})).init(), (n ew rcube_ splitter({id: "addressviewsp litter", p1:"# addresslist", p2: "#contacts-box", orientation: " v", relative:!0, sta rt :266, min:260, size:12})).init()), a  = $("#dra gcontactmenu"), a.length && (rcmail. gui_object("dragme nu ", "dragc on tactmenu"), w.dragmenu = a)); $(".tabbed").each(function(a,
		b){J( b)}); $("select.decorated").each(function(){if (bw.o pera)$(this).removeCla ss("decorated");   else{var a = $(this), b = a .parent(), c = M ath.max(a.height(),  26) - 2, d = a.width( ) - 22, e = $("opti on", this).first().text(); "" != $("o ption:selected", this ).val() && (e = $("option:selected", this).text()); var g = $ ('<a  class="menuselector" tabindex="- 1"><span class=" handle">' + e  + "</span></a>").css("position", "abs o lute").offset(a.p ositi o n()).insertAfter(a); g.children().width(d).he ight(c).css("line-height", c - 1  + "px"); "absolute" != b.css (" position") &&
		b.css("position", "re lative"); a.width(g.width ()).on(b w .mz?"change k e yup ": "change", function(){var a =  $("o pt ion:select e d", this).text(); $(th is).n e x t ().children().te xt(a )}); a.on("focus",  function(a) {g.addClass("focus")}).on("blur" ,  funct i on( a){g . removeCl ass("focus ")})}}); a =  $ ("body.min width " ) ;  a.length && a.c ss(" min-width", $(".toolbar"). width()  +  $("# q u icksearchbar " ) .width() + $("#searchfi lt er").width() + 30); w indow. o nresize = r; r()};  this.init_t abs = J;   this.show_about = function(a){var b = $("<i frame>").attr({id:"aboutfr ame ", 
 		src:rc ma i l.url("settings/about" ),   f r ameb o rd er : "0"}); h = Math.floor(0.75 * $(window ).h e ight () ) ; buttons = {}; supportln = $( "#supportlin k"); supportl n.le ngth && (v.supporturl = supp ortln.attr("href ") )  && (buttons[supportln. html()] = function(a) {0 > v.supporturl.indexOf("ma i lto:")?window.open(v.supporturl):loc ation.href = v.supporturl}); b.di alog({modal:!0, re s i zable:!1, closeOnEscape:!0, t i tle:a? a.title   ||  a.innerHT M L:null, close:func ti on(){b.dialog("de st roy").remove( ) }, buttons:buttons, width:640, height:h}).width(64 0 )}; this.show_popup =
		function(a, b, c){! c  && t[a] || B(a, c); c = t[a] || {}; c =  $ (c.link?c.link:"#" + a + "link"); v ar e = c.offset( ); c.has(".inner")  && (c = c.child re n(".inner")); ret urn rcmail.command("menu-open", {menu:a, show:b }, c.get(0), $.E vent("clic k", {target:c.get(0), pageX:e.left, pageY:e.top,  cl ientX:e. l eft,  clientY:e . top}) )}; this . toggl e_popup = f u nctio n(a, b, c){!c  & &  t[a] || B(a, c ) ; r eturn rcma i l.co mmand("menu-open", a, b.target, b )}; this.add_popup = B; t h is.set_searchmod = function(a){var b, c; b = rc mail.env.task; var e = rcmail.env. search_mods, g = rcmail.env.mailbox; 
		"all" == $('input[name="s_scope"] :checked').val() && (g =  " *"); e || (e = {}); "mail" == b?(e[g] || (e[g ] = rcube_clone_object(e["*"])), c  = e[g], b = "text"):(c = e, b = "*" ); a.checke d ?c[a.value] = 1:d e lete  c [ a.value]; a.val ue  == b && $('input:checkbox[name =" s_ mods[]"]' ). m ap(function(){this != a && ( th is .checke d  = !0, a.checked?(this.disabled = !0, dele te c[this.value]):(this.disabled = !1, c[this.valu e ]  = 1))}) ;  rcma il.set_searchmo d s(c)}; this.se t_ searchscope  =  function(a){r cm ail.s et_searchscop e (a.valu e)} ; this.show_uploadfo r m  = z; thi s .show_h ea de r_row =
 	 	C; t hi s.h ide_header_ r ow = fun ct io n(a){var b =  $ ("#_" + a); D[a] = b.v al(); b.val("");   $("#co mpose-" + a ) .hide();  $("#" + a + " - link").show (); s ( ); re turn!1}; this.update_quota = A; th i s. get_pref  =  f; this.save_pref   = q; this.fol der_sea r ch_init = G;  if (window. $  && document.body ){ var K = f("minim al mode"); (parseInt(K) || null === K   && 850 > $(window).height()) && $(document.body).a ddClass("m i nimal"); bw.tablet && $("#viewport").attr("content ", "width=d e vice-width, initial-s cale=1.0, maximum-scale=1.0,  user-scalable=0");  $(document).ready(function(){l.init ( )})}}
function rcube_scroller(f, q, r){var k = this; this.list = $(f); this.top  =  $(q); this.bottom = $(r ) ; this.step_si z e = 6; this.step_time  = 20; this.delay = 500; this .top. m ouseent er(functio n (){rcmail.drag_ a ctive && (k.ts = wind ow.setTimeout(function( ) {k.sc roll("down")},  k.delay))}).mouseout(function(){ k .ts && window.clea rT im eo ut(k.ts)}); this.bo t tom.mouseenter (function(){rc mail.dr ag_active && (k.ts = wind ow.setTimeout(functio n(){k.scrol l ("up")}, k.de lay))}).mouseout(function(){k.ts && win dow.clearTimeout(k. t s)}); this.scr o ll = function(f){var b =
	 	 this,  e = this.step_size ; rcmail.drag_acti v e && ("down" == f && (e  * =  -  1), t his.list.get(0).scroll Top += e, this.ts =   window.setTim e out(function ( ){b.sc ro ll(f)}, this. s tep_time))}}
function rcube_splitte r(f ) {function q(e){if (bw.konq | | b w .chrome || bw .safari)document.body .s t yle.we b kitUser Select = "none"; b.p1pos  = b.relative?b.p1.p o sition():b.p1.o f fset(); b.p2pos = b.relati v e?b.p2 .position():b.p2.of fset(); b.drag_act i ve = !0; $(document).on(" m ousemo ve." + this.id, r).on(" mouseup." + this.id ,  k); $("ifram e ").each(fun c ti o n(b, e ){ $("<div>").at t r("id", "iframe-splitter-fix-" + b ).a d dClass("iframe-splitter-fix") .css ({background:"#fff",  w i dth:e. o ffsetWidth + "px", heigh t:e.offsetHeight  +  "px", position:"absolute",
		opacity:"0.001", z Index:1E 3 }).css($(this).of fset()).appendTo("body")} ) }function r(e){if   (!b.d rag_active) r eturn !1; window.clearTim e out(b .ts); b.ts = window.s e tTimeout(fu nction(){var f = rc ub e_event.get_mouse_pos(e); if (b. relative){var k  = b.pare nt .offset() ;  f.x -= k.left; f.y -= k.top}b.horizontal?f.y -  b .halfsize > b. p 1pos.top && f.y + b.halfsize < b.p2pos.to p + b.p 2 .outerHeight() && (b.pos = Math.max(b.min , f.y - Math. m ax(0,  b.offset)), b.pos > b.min  & & (b.pos  = Math.min(b.po s , b.pare nt. height() - b.min)), b.resize ()):f.x - b.halfsize > b .p1pos.left &&
		f.x +   b.halfsize < b.p2pos.left + b.p2.outerWidth() && (b.pos =  Math.max(b.min, f.x   - Mat h.max(0, b.offset)),  b .pos  > b.min && (b.pos =  Math.min(b.pos,  b.parent.width() - b.min)), b.resize()); b.p1pos = b.relative?b.p1.posi tion():b.p1.offset(); b.p2pos = b.relative?b.p2.position ():b . p2.offset()}, 1); return!1}function  k( e){if (bw.konq || bw.chrome || b w .safari)document.body.style.w eb kitUserSelect = "a u to"; $(document).o ff( ". " + b.i d);  b .drag_ac tive = !1; $("div .ifram e -splitter-f i x").remove() ;  b.set _ cookie(); " f unction" ==  t ypeof b.callback && b.callb a ck(b);
		return  bw . safari?!0:r cube_event. ca ncel(e ) }function u( e ){b.horizontal? (e = parseInt(b.p a rent.outerHeight(),  10) -  parseI n t(b.p2[0].s t yle.top, 10)  -  (bw.i e 8?2:0), b.p 2 .css("height" ,  (0 < e?e:0) + "px")):(e =   parseInt(b.pare nt. o uterWidth() , 10) - par se Int(b. p 2[0].style.l e ft, 10), b.p2.c ss("width", (0 <   e?e:0) + "px"))}this.p = f ;  this.id = f.id; this.horizontal = "horiz ontal"  = = f.orientation || "h" == f.orientation; this.halfsize =  (void 0  != = f.size? f. size:10) / 2; this.pos = f.start || 0; this.min   = f.min || 20; this.offset   = f.of fset || 0; th i s.rela tive = f.relative?
		!0:!1; this.drag_ active = !1; th is .render = f.render ;  this.callback = f.callback; var b = this; rcube_splitter._instances[this.id] = b; this .init = function(){t h is.p1 = $(this.p.p1); this.p2 =  $(t h is.p.p2); this.parent = thi s.p 1 .parent(); if  (this.p1.length & &  t his.p2 . length ){this.p1p o s = this.relative?this.p1.posit ion ( ):this.p1.offset(); this.p2p os =  this.relative?th is . p2.pos i tion():this.p2.offset( ) ; this.handle = $("<div>").attr("id", this.id).attr("un selectable", "o n ").attr("role ", "presentation").addClass("spli tter " + (this.horizontal?
		"splitte r -h" :"splitter-v")).appendTo(th i s.parent).mousedown(q); if (this.horizontal){var b = this.p1pos.top + this.p1.outerHeight(); this.handle.css({left:"0px", top:b + "px"})} else b = this.p1pos.left + this.p1.outerWidth(), this.handle.css({left:b + "px", top:"0px"}); bw.ie && $(window).resize(u); (b = this.get_cookie()) && !isNaN(b)?(this.pos = parseFloat(b), this.resize()):this.pos && (this.resize(), this.set_cookie())}}; this.resize = function(){if (this.horizontal){if (this.p1.css("height", Math.floor(this.pos - this.p1pos.top - Math.floor(this.halfsize)) +
		"px"), this.p2.css("top", Math.ceil(this.pos + Math.ceil(this.halfsize) + 2) + "px"), this.handle.css("top", Math.round(this.pos - this.halfsize + this.offset) + "px"), bw.ie){var b = parseInt(this.parent.outerHeight(), 10) - parseInt(this.p2.css("top"), 10) - (bw.ie8?2:0); this.p2.css("height", (0 < b?b:0) + "px")}} else this.p1.css("width", Math.floor(this.pos - this.p1pos.left - Math.floor(this.halfsize)) + "px"), this.p2.css("left", Math.ceil(this.pos + Math.ceil(this.halfsize)) + "px"), this.handle.css("left", Math.round(this.pos - this.halfsize +
		this.offset + 3) + "px"), bw.ie && (b = parseInt(this.parent.outerWidth(), 10) - parseInt(this.p2.css("left"), 10), this.p2.css("width", (0 < b?b:0) + "px")); this.p2.resize(); this.p1.resize(); this.drag_active && $("iframe").each(function(b, e){var f = $(this).offset(); $("#iframe-splitter-fix-" + b).css({top:f.top + "px", left:f.left + "px", width:e.offsetWidth + "px", height:e.offsetHeight + "px"})}); "function" == typeof this.render && this.render(this)}; this.get_cookie = function(){return window.UI?UI.get_pref(this.id):null}; this.set_cookie =
		function(){window.UI && UI.save_pref(this.id, this.pos)}}rcube_splitter._instances = {}; rcube_splitter.get_instance = function(f){return rcube_splitter._instances[f]};
