
jQuery.Class("Settings_Vtiger_TermsAndConditions_Js",{},{container:false,getContainer:function(){if(this.container==false){this.container=jQuery("#TermsAndConditionsContainer")}return this.container},saveTermsAndConditions:function(b){var a=jQuery.Deferred();var c=b.val();var d={module:app.getModuleName(),parent:app.getParentModuleName(),action:"TermsAndConditionsSaveAjax",tandc:c};AppConnector.request(d).then(function(e){a.resolve()},function(e,f){a.reject()});return a.promise()},registerKeyUpEvent:function(){var a=this.getContainer();a.find(".contents").one("keyup",".TCContent",function(b){jQuery(".saveTC",a).removeClass("hide")})},registerEvents:function(){var c=this;var a=c.getContainer();var b=jQuery(".TCContent",a);var d=jQuery(".saveTC",a);app.registerEventForTextAreaFields(b);c.registerKeyUpEvent();d.click(function(g){d.addClass("hide");var f=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});c.saveTermsAndConditions(b).then(function(e){f.progressIndicator({mode:"hide"});c.registerKeyUpEvent();var h={text:app.vtranslate("JS_TERMS_AND_CONDITIONS_SAVED")};Settings_Vtiger_Index_Js.showMessage(h)},function(e){})})}});jQuery(document).ready(function(b){var a=new Settings_Vtiger_TermsAndConditions_Js();a.registerEvents()});