Settings_Workflows_Edit_Js("Settings_Workflows_Edit2_Js",{},{step2Container:false,advanceFilterInstance:false,init:function(){this.initialize()},getContainer:function(){return this.step2Container},setContainer:function(a){this.step2Container=a;return this},initialize:function(a){if(typeof a=="undefined"){a=jQuery("#workflow_step2")}if(a.is("#workflow_step2")){this.setContainer(a)}else{this.setContainer(jQuery("#workflow_step2"))}},calculateValues:function(){var b=jQuery("#enableAdvanceFilters");if(b.length>0&&b.is(":checked")==false){jQuery("#advanced_filter").val(jQuery("#olderConditions").val())}else{jQuery('[name="filtersavedinnew"]').val("6");var a=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(a))}},submit:function(){var a=jQuery.Deferred();var b=this.getContainer();this.calculateValues();var d=b.serializeFormData();var c=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(d).then(function(f){b.hide();if(f.result){Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_WORKFLOW_SAVED_SUCCESSFULLY")});var e=jQuery('[name="record"]',b);if(e.val()==""){e.val(f.result.id)}var g={module:app.getModuleName(),parent:app.getParentModuleName(),view:"Edit",mode:"step3",record:f.result.id};AppConnector.request(g).then(function(h){a.resolve(h)})}c.progressIndicator({mode:"hide"})},function(e,f){});return a.promise()},registerEnableFilterOption:function(){jQuery('[name="conditionstype"]').on("change",function(c){var a=jQuery("#advanceFilterContainer");var b=jQuery(c.currentTarget);if(b.hasClass("recreate")){if(b.is(":checked")){a.removeClass("zeroOpacity")}}else{a.addClass("zeroOpacity")}})},registerEvents:function(){var b=app.validationEngineOptions;b.onValidationComplete=function(d,c){return c};b.promptPosition="bottomRight";jQuery("#workflow_step2").validationEngine(b);var a=this.getContainer();jQuery('button[type="submit"]',a).on("click",function(h){var g=jQuery(".fieldUiHolder");for(var f=0;f<g.length;f++){var d=g[f];var c=jQuery(".getPopupUi",d);var j=jQuery('[name="valuetype"]',d).val();if(j!="rawtext"){c.removeAttr("data-validation-engine");c.removeClass("validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]")}}});app.changeSelectElementView(a);this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery(".filterContainer",a));this.getPopUp();if(jQuery('[name="filtersavedinnew"]',a).val()=="5"){this.registerEnableFilterOption()}}});